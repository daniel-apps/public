[[[global_tags]
  # clustername = 

[agent]
  interval = "10s"
  round_interval = true
  metric_buffer_limit = 1000
  flush_buffer_when_full = true
  collection_jitter = "0s"
  flush_interval = "10s"
  flush_jitter = "0s"
  debug = false
  quiet = false
  logfile = ""
  hostname = ""

[[outputs.influxdb]]
  urls = ["PlaceInfluxDBUrlHere"] 
  database = "telegraf"
  precision = "s"
  timeout = "5s"

[[inputs.win_perf_counters]]

####################################################################################################
#				Windows Host
#
####################################################################################################

  [[inputs.win_perf_counters.object]]
    # Processor usage, alternative to native, reports on a per core.
    ObjectName = "Processor"
    Instances = ["*"]
    Counters = [
      "% Idle Time",
      "% Interrupt Time",
      "% Privileged Time",
      "% User Time",
      "% Processor Time",
    ]
    Measurement = "win_cpu"
    # Set to true to include _Total instance when querying for all (*).
    #IncludeTotal=false


#  [[inputs.win_perf_counters.object]]
#    # Process metrics, in this case for IIS only
#    ObjectName = "Process"
#    Counters = [
#      "% Processor Time",
#      "Handle Count",
#      "Private Bytes",
#      "Thread Count",
#      "Virtual Bytes",
#      "Working Set"
#    ]
#    Instances = ["w3wp", "dfmserver", "dfmwatchdog", "java", "httpd", "TrendScan", "TmListen", "CNTAoSMgr"]
#   Measurement = "win_proc"
#    #IncludeTotal=false #Set to true to include _Total instance when querying for all (*).#
#
#    
#    [[inputs.win_perf_counters.object]]
#      # Disk times and queues
#      ObjectName = "LogicalDisk"
#      Instances = ["*"]
#      Counters = [
#        "% Idle Time", "% Disk Time","% Disk Read Time",
#        "% Disk Write Time", "% User Time", "Current Disk Queue Length"
#      ]    
#      Measurement = "win_disk"

#    [[inputs.win_perf_counters.object]]
#      # Disk times and queues
#      ObjectName = "PhysicalDisk"
#      Instances = ["*"]
#      Counters = [
#        "Disk Read Bytes/sec",
#    "Disk Write Bytes/sec",
#    "Avg. Disk Queue Length",
#    "Current Disk Queue Length",
#    "Avg. Disk sec/Read",
#    "Avg. Disk sec/Write",
#    "Split IO/sec",
#      ]
#      Measurement = "win_physdisk"
#      # Set to true to include _Total instance when querying for all (*).
#      #IncludeTotal=false

    [[inputs.win_perf_counters.object]]
      # Disk times and queues
      ObjectName = "Network Interface"
      Instances = ["*"]
      Counters = [
        "Bytes Received/sec",
    "Bytes Sent/sec",
    "Packets Sent/sec",
    "Packets Received/sec",
      ]
      Measurement = "win_net"
      # Set to true to include _Total instance when querying for all (*).
      #IncludeTotal=false

  [[inputs.win_perf_counters.object]]
    ObjectName = "System"
    Counters = [
      "Context Switches/sec",
      "System Calls/sec",
      "Processor Queue Length",
    ]
    Instances = ["------"]
    Measurement = "win_system"
    # Set to true to include _Total instance when querying for all (*).
    #IncludeTotal=false

  [[inputs.win_perf_counters.object]]
    # Example query where the Instance portion must be removed to get data back,
    # such as from the Memory object.
    ObjectName = "Memory"
    Counters = [
      "Available MBytes",
      "Cache Faults/sec",
      "Demand Zero Faults/sec",
      "Page Faults/sec",
      "Pages/sec",
     "Page Reads/sec",
     "Page Writes/sec",
      "Transition Faults/sec",
      "Pool Nonpaged Bytes",
      "Pool Paged Bytes",
     "Cache Bytes",
    ]
    # Use 6 x - to remove the Instance bit from the query.
    Instances = ["------"]
    Measurement = "win_mem"
    # Set to true to include _Total instance when querying for all (*).
    #IncludeTotal=false

  [[inputs.win_perf_counters.object]]
    # Example query where the Instance portion must be removed to get data back,
    # such as from the Paging File object.
    ObjectName = "Paging File"
    Counters = [
      "% Usage"
    ]
    Instances = ["_Total"]
    Measurement = "win_swap"


####################################################################################################
#				Hyper-V
#
####################################################################################################

  [[inputs.win_perf_counters.object]]
    ObjectName = "Hyper-V Hypervisor Logical Processor"
    Instances = ["_Total"]
    Counters = [
      "% Total Run Time"
    ]
    Measurement = "hv_cpu"

  [[inputs.win_perf_counters.object]]
    ObjectName = "Cluster CSVFS"
    Instances = ["*"]
    Counters = [
      "Reads/sec",
      "Writes/sec",
      "Avg. sec/Write",
      "Avg. sec/Read",
      "Read Bytes/sec",
      "Write Bytes/sec"
    ]
    Measurement = "CSV_FS"
    IncludeTotal=true
 
  [[inputs.win_perf_counters.object]]
    ObjectName = "Memory"
    Counters = [
      "% Committed Bytes In Use"
    ]
    Instances = ["*"]
    Measurement = "win_system"

	[[inputs.win_perf_counters.object]]
    ObjectName = "Hyper-V Virtual Machine Health Summary"
    Instances = ["------"]
    Measurement = "hyperv_health"
    Counters = [
      "Health Ok",
      "Health Critical",
    ]
    
    [[inputs.win_perf_counters.object]]
    ObjectName = "Hyper-V Hypervisor"
    Instances = ["------"]
    Measurement = "hyperv_hypervisor"
    Counters = [
      "Logical Processors",
      "Partitions",
    ]

    [[inputs.win_perf_counters.object]]
    ObjectName = "Hyper-V Hypervisor Virtual Processor"
    Instances = ["*"]
    Measurement = "hyperv_processor"
    Counters = [
      "% Guest Run Time",
      "% Hypervisor Run Time",
      "% Idle Time",
      "% Total Run Time",
    ]
    
    [[inputs.win_perf_counters.object]]
    ObjectName = "Hyper-V Dynamic Memory VM"
    Instances = ["*"]
    Measurement = "hyperv_dynamic_memory"
    Counters = [
      "Current Pressure",
      "Guest Visible Physical Memory",
    ]

    [[inputs.win_perf_counters.object]]
    ObjectName = "Hyper-V VM Vid Partition"
    Instances = ["*"]
    Measurement = "hyperv_vid"
    Counters = [
      "Physical Pages Allocated",
    ]
    
    [[inputs.win_perf_counters.object]]
    ObjectName = "Hyper-V Virtual Switch"
    Instances = ["*"]
    Measurement = "hyperv_vswitch"
    Counters = [
      "Bytes Received/Sec",
      "Bytes Sent/Sec",
      "Packets Received/Sec",
      "Packets Sent/Sec",
    ]
    
    [[inputs.win_perf_counters.object]]
    ObjectName = "Hyper-V Virtual Network Adapter"
    Instances = ["*"]
    Measurement = "hyperv_vmnet"
    Counters = [
      "Bytes Received/Sec",
      "Bytes Sent/Sec",
      "Packets Received/Sec",
      "Packets Sent/Sec",
    ]
    
    [[inputs.win_perf_counters.object]]
    ObjectName = "Hyper-V Virtual IDE Controller"
    Instances = ["*"]
    Measurement = "hyperv_vmdisk"
    Counters = [
      "Read Bytes/Sec",
      "Write Bytes/Sec",
      "Read Sectors/Sec",
      "Write Sectors/Sec",
    ]
    
    [[inputs.win_perf_counters.object]]
    ObjectName = "Hyper-V Virtual Storage Device"
    Instances = ["*"]
    Measurement = "hyperv_storage"
    Counters = [
      "Write Operations/Sec",
      "Read Operations/Sec",
      "Read Bytes/Sec",
      "Write Bytes/Sec",
      "Latency",
      "Throughput",
    ]
